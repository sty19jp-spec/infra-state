XserverVPS n8n + Dify 導入前チェックリスト
====================================

目的：
・構築途中で詰まらない
・ポート競合、証明書失敗、公開事故を防ぐ
・すべての前提条件を「作業開始前」に確定する

────────────────────────
1. VPS 基本情報
────────────────────────

[ ] OS は Ubuntu LTS（22.04 または 24.04）
    確認コマンド:
    lsb_release -a

[ ] CPU 2core 以上
[ ] RAM 4GB 以上（Dify使用時は 8GB 推奨）
[ ] Disk 50GB 以上

────────────────────────
2. SSH / 権限
────────────────────────

[ ] SSH鍵でログイン可能
[ ] sudo 実行可能
[ ] root 直ログインは不要（推奨：無効）

────────────────────────
3. ポート使用状況
────────────────────────

使用予定ポート：
・22 (SSH)
・80 (HTTP)
・443 (HTTPS)

[ ] 上記以外のポートは使用していない

確認コマンド:
ss -lntp

────────────────────────
4. ドメイン / DNS
────────────────────────

[ ] n8n 用ドメイン決定
    例: n8n.example.com

[ ] dify 用ドメイン決定
    例: dify.example.com

[ ] Aレコードが VPS のグローバルIPを指している
[ ] TTL は 300〜600 秒程度

確認コマンド:
dig n8n.example.com
dig dify.example.com

────────────────────────
5. Firewall（UFW）
────────────────────────

[ ] UFW が有効
[ ] 許可ポートは 22 / 80 / 443 のみ

確認コマンド:
ufw status verbose

────────────────────────
6. Docker 環境
────────────────────────

[ ] Docker Engine インストール済み
[ ] Docker 起動中
[ ] 自動起動が有効

確認コマンド:
docker --version
docker info
systemctl status docker

────────────────────────
7. Docker Compose
────────────────────────

[ ] docker compose v2 が使用可能

確認コマンド:
docker compose version

────────────────────────
8. ディレクトリ設計（未作成でOK）
────────────────────────

後続手順で作成予定：
/opt/stacks/reverse-proxy/
/opt/stacks/n8n/
/opt/stacks/dify/
/opt/backups/
/opt/scripts/

────────────────────────
9. 秘密情報の取り扱いルール
────────────────────────

・APIキーやパスワードはチャットに貼らない
・.env ファイルにのみ記載
・.env は Git 管理しない
・バックアップ時は別管理

────────────────────────
10. 構築開始判定
────────────────────────

以下すべて YES で構築開始：

[ ] SSH OK
[ ] DNS OK
[ ] 80/443 空き
[ ] Docker OK
[ ] UFW OK
[ ] ドメイン確定

注意：
このチェックを満たさない状態で構築を始めない。
