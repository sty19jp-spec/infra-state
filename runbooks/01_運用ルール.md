# 運用ルール（固定）

## 正本の分担
- GitHub: Runbook / 規約 / 設計 / 手順の正本
- Google Drive: 重いログ（snapshot）、エクスポート、バックアップアーカイブ
- VPS: 実体（稼働環境）

## “snapshot” の意味
- 「その時点の状態を丸ごと採取した証跡」のこと。
- 例: docker ps / docker network ls / ss -lntp / docker inspect（必要最小限）など。

## なぜ snapshot が必要か
- 問題が起きた時に「いつから壊れたか」「何が変わったか」を特定できる。
- 変更前後で差分が取れる。

## 保存場所
- rawの出力（txt/json）は Google Drive の 03_最新 snapshot に保存する。
- GitHubには “要約” と “Driveリンク” と “差分が分かる情報” を残す（10_ReadOnly_Check.md）。

---

# 運用ルール（固定）

## 1. 正本の役割分担（固定）
- GitHub: 手順（Runbook）/ 状態の要約（Inventory）/ 参照リンク（Index）
- Google Drive: 重いログ / export / snapshot（生データ）

## 2. Snapshot のルール（固定）
- 変更作業は必ず「Before → After」の2回 snapshot を取る
- Snapshot は Drive に保存する（GitHubには置かない）
- Drive フォルダ命名規則:
  - YYYY-MM-DD_<TASK>_before/
  - YYYY-MM-DD_<TASK>_after/
- <TASK> は短い英数字に統一（例: ASR502, NPMFix, N8nUpgrade）

## 3. Inventory のルール（固定）
- inventory は「状態の要約」と「Drive上のログ所在」を記録する
- 生ログは書かない（Driveに置き、GitHubは参照だけ）
- Inventory は1作業=1ファイルで残す
- Inventory ファイル命名規則:
  - inventory/YYYY-MM-DD_<TASK>_index.md

## 4. Handover のルール（固定）
- 作業サイクルの最後に handover を1本残す（当日分）
- 命名:
  - runbooks/90_Handover_YYYY-MM-DD.md
